<div class="productos-container">
  <!-- Breadcrumb Navigation -->
  <div class="breadcrumb">
    <a routerLink="/dashboard" class="breadcrumb-item">
      <mat-icon>home</mat-icon>
      <span>Dashboard</span>
    </a>
    <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
    <span class="breadcrumb-item active">
      <mat-icon>inventory_2</mat-icon>
      <span>Productos</span>
    </span>
  </div>

  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <div class="header-text">
        <div class="title-wrapper">
          <div class="title-icon">
            <mat-icon>inventory_2</mat-icon>
          </div>
          <div class="title-content">
            <h1>Gestión de Productos</h1>
            <p>
              <mat-icon>restaurant_menu</mat-icon>
              <span>Administra tu inventario y menú del restaurante</span>
            </p>
          </div>
        </div>
      </div>
      <button class="btn-nuevo" (click)="nuevoProducto()">
        <div class="btn-icon-wrapper">
          <mat-icon>add</mat-icon>
        </div>
        <span class="btn-text">Nuevo Producto</span>
        <div class="btn-shine"></div>
      </button>
    </div>
  </div>

  <!-- Filtros y búsqueda -->
  <div class="filters-section">
    <div class="search-box">
      <mat-icon>search</mat-icon>
      <input type="text" placeholder="Buscar productos..." [(ngModel)]="searchTerm" (input)="filtrarProductos()">
    </div>
    
    <div class="filter-chips">
      <button class="filter-chip" [class.active]="filtroTipo === 'TODOS'" (click)="filtrarPorTipo('TODOS')">
        <mat-icon>restaurant</mat-icon>
        <span>Todos</span>
      </button>
      <button class="filter-chip" [class.active]="filtroTipo === 'PLATO'" (click)="filtrarPorTipo('PLATO')">
        <mat-icon>lunch_dining</mat-icon>
        <span>Platos</span>
      </button>
      <button class="filter-chip" [class.active]="filtroTipo === 'BEBIDA'" (click)="filtrarPorTipo('BEBIDA')">
        <mat-icon>local_cafe</mat-icon>
        <span>Bebidas</span>
      </button>
      <button class="filter-chip" [class.active]="filtroTipo === 'ENTRADA'" (click)="filtrarPorTipo('ENTRADA')">
        <mat-icon>tapas</mat-icon>
        <span>Entradas</span>
      </button>
      <button class="filter-chip" [class.active]="filtroTipo === 'POSTRE'" (click)="filtrarPorTipo('POSTRE')">
        <mat-icon>cake</mat-icon>
        <span>Postres</span>
      </button>
    </div>
  </div>

  <!-- Estadísticas rápidas -->
  <div class="stats-row">
    <div class="stat-item">
      <mat-icon>inventory_2</mat-icon>
      <div class="stat-info">
        <span class="stat-value">{{productosFiltrados.length}}</span>
        <span class="stat-label">Productos</span>
      </div>
    </div>
    <div class="stat-item">
      <mat-icon>check_circle</mat-icon>
      <div class="stat-info">
        <span class="stat-value">{{productosActivos}}</span>
        <span class="stat-label">Activos</span>
      </div>
    </div>
    <div class="stat-item warning">
      <mat-icon>warning</mat-icon>
      <div class="stat-info">
        <span class="stat-value">{{productosStockBajo}}</span>
        <span class="stat-label">Stock Bajo</span>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div class="loader-container" *ngIf="loading">
    <div class="spinner"></div>
    <p>Cargando productos...</p>
  </div>

  <!-- Grid de productos -->
  <div class="productos-grid" *ngIf="!loading && productosFiltrados.length > 0">
    <div class="producto-card" *ngFor="let producto of productosFiltrados">
      <!-- Imagen del producto -->
      <div class="producto-image">
        <mat-icon>inventory_2</mat-icon>
        <div class="producto-badge stock-bajo" *ngIf="producto.stock < 10">Stock Bajo</div>
      </div>

      <!-- Contenido -->
      <div class="producto-content">
        <div class="producto-header">
          <h3>{{producto.nombre}}</h3>
        </div>

        <p class="producto-descripcion">{{producto.descripcion || 'Sin descripción'}}</p>

        <div class="producto-info">
          <div class="info-item">
            <mat-icon>inventory</mat-icon>
            <span [class.text-warning]="producto.stock < 10">Stock: {{producto.stock}}</span>
          </div>
        </div>

        <div class="producto-footer">
          <div class="producto-precio">
            <span class="precio-label">Precio</span>
            <span class="precio-value">${{producto.precio | number:'1.2-2'}}</span>
          </div>

          <div class="producto-actions">
            <button class="btn-action edit" (click)="editarProducto(producto)">
              <mat-icon>edit</mat-icon>
            </button>
            <button class="btn-action delete" (click)="eliminarProducto(producto.id)">
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="!loading && productosFiltrados.length === 0">
    <div class="empty-icon">
      <mat-icon>inventory_2</mat-icon>
    </div>
    <h3>No hay productos</h3>
    <p>{{searchTerm ? 'No se encontraron productos con ese criterio' : 'Comienza agregando tu primer producto'}}</p>
    <button class="btn-nuevo" (click)="nuevoProducto()">
      <mat-icon>add_circle</mat-icon>
      <span>Agregar Producto</span>
    </button>
  </div>
</div>
